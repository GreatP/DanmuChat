<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>首页</title>
    <script src="./js/jquery-3.1.1.js"></script>
</head>
<body>
<img id="QrGen" src="" />

<script type="text/javascript">
    $(document).ready(function() {
        var uuid;
        $.get("/qrgen", function(data, status) {
            var obj = eval("(" + data + ")");
            //设置该uuid值
            uuid = obj.uuid;
            //设置二维码图片地址
            $("#QrGen").attr("src", obj.img);
            //检查验证登录
            checkScan();
        });

        function checkScan() {
            setInterval(function() {
                $.get("/qrgen?uuid=" + uuid,
                    function(data, status) {
                    var obj = eval("(" + data + ")");
                        if (obj.status === "ONLINE") {
                            //验证成功并重定向到welcome页面
                            window.location = "http://wx.wongwongsu.com";
                        }
                    });
            },4000)
        }

    });
</script>
</body>
</html>